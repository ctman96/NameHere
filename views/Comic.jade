extends layout
block title
  title #{comic.title}

block content

  head
    style.
      #div1 {width:750px;height:220px;padding:10px;border:1px solid #aaaaaa;}
    script.
      function allowDrop(ev) {
      ev.preventDefault();
      }
      function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
      }
      function drop(ev) {
      ev.preventDefault();
      var data = ev.dataTransfer.getData("text");
      ev.target.appendChild(document.getElementById(data));
      }

  link(rel='stylesheet', href='/stylesheets/Comic.css')
  - console.log(comic)
  - console.log(comic._id)
  - var w = comic.width
  - console.log('w: ' + w)
  - var h = comic.height
  - console.log('h: ' + h)
  - var size = w*h
  - var i = 0;
  - var n = 0;
  - var index = 0;
  - var title = comic.title
  - console.log('title: ' + title)
  - var author = comic.author
  - console.log('author: ' + author)

  div#comicwrapper
    ul#comic
      li
        h1 #{comic.title}
      li
        if comic.panels
          each panel, p in comic.panels
            img#drag1(src = panel, draggable='true', ondragstart='drag(event)')
      //  if w && h
      //    ul
      //      while i < height
      //        li
      //          while n < width
      //            img(src= comic.panels[index], alt="placeholder" + (index))
      //            index = index + 1
        else
          img(src= comic.image, alt="placeholder", draggable='true', ondragstart='drag(event)')
      li
        p
          b Author: #{ comic.author}
        br



  body
    if user
      p Drag the comic panel you like into the rectangle:
      #div1(ondrop='drop(event)', ondragover='allowDrop(event)')
      br
      h1(id="title") Select the panel you like
        button(class="btn", data-action="bea").
          Add to the workspace
