extends layout1

block title
  title Workspace
block content
  head
    style.
      #title {position:relative;margin-top:300px;;}
      #text {position:relative;margin-top:10px;;}
      #div1 {width:1200px;height:440px;padding:10px;border:1px solid #aaaaaa;margin-top:10px;;position:relative;}
      .img {position:relative;margin-top:10px;;}
      ul#panels {
      list-style: none;
      margin: 0px;
      }
      ul#panels li{
      display: inline-block;
      padding: 5px;
      }
      .deleteMe{
          float: right;
          background: dark-grey;
      }

  body
    h1#title= title
    p#text Drag your comic panels into the box:
    form#formPublish(name="publish",method="post",action="/publish")
      input#inputtitle(type="text", placeholder="comic title", name="title", required)

      input#inputtag1(type="text", placeholder="tag1", name="tag1")
      input#inputtag2(type="text", placeholder="tag2", name="tag2")
      br
      input#inputauthor(type="text", placeholder="Author", value=user.username, name="author", required, disabled)

      input#inputtag3(type="text", placeholder="tag3", name="tag3")
      input#inputtag4(type="text", placeholder="tag4", name="tag4")

      p Private:
        input#privacy(type="checkbox", name="privcy", value="privacy", required)

      -var length = 1;
      input#length(type="text", disabled, value = length, size="3")
      input#inc(type="button", value='+', onclick='addItem()')
      input#dec(type="button", value="-", onclick='remItem()')
      br

      - var n = 0
      ul#panels
        while n < length
          li
            img(src="http://portfoliotheme.org/enigmatic/wp-content/uploads/sites/9/2012/07/placeholder1.jpg", height="100", class="droppable")
            div(class="deleteMe") X
          -n++

      br
      input#btnSubmit(type='submit', value='Publish')

    br
    br
    div#images(style="overflow-y:scroll; height:400px;")
      img(src="http://40.media.tumblr.com/tumblr_m0zjyud8Nx1qz4aeko1_250.png", class="draggable", height="100")
      img(src="https://650centplague.files.wordpress.com/2014/01/garfield2010-06-19.jpg", class="draggable", height="100")
      img(src="http://www.mezzacotta.net/garfield/comics/1617.png", class="draggable", height="100")
      img(src="http://joshreads.com/images/13/01/i130112heathcliff.jpg", class="draggable", height="100")
      //each image, i in workspace.images
        //img(src=i)

  script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js')
  script(src="//code.jquery.com/ui/1.11.2/jquery-ui.js")
  script.
    $(document).ready(function(){
      $(".deleteMe").on("click", function(){
        if (document.getElementById("length").value > 1){
          document.getElementById("length").value--;
          $(this).closest("li").remove();
        }
      });
    });
    $(".draggable").draggable({
      helper: "clone",
      revert: "invalid"
    });
    $(".droppable").droppable({
      drop: function(event, ui) {
        $(this).attr("src", ui.draggable.attr("src"));
      }
    });
    var list = document.getElementById('panels');

    function addItem(){
      document.getElementById("length").value++;
      var li = document.createElement("LI");
      var img = document.createElement("img");
      img.src = "http://portfoliotheme.org/enigmatic/wp-content/uploads/sites/9/2012/07/placeholder1.jpg";
      img.height = "100";
      img.setAttribute("class", "droppable");
      var xdiv = document.createElement("div");
      xdiv.setAttribute("class", "deleteMe");
      xdiv.innerHTML = "X";

      li.appendChild(img);
      li.appendChild(xdiv);

      document.getElementById("panels").appendChild(li);
    };

    function remItem(){
      if (document.getElementById("length").value > 1){
        document.getElementById("length").value--;
        $('#panels li:last').remove();
      }
    };
